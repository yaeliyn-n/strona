<!DOCTYPE html>
<html lang="pl" class="scroll-smooth dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Kroniki Elary - Twoja brama do magicznego ≈õwiata anime, mangi i japo≈Ñskiej kultury! Do≈ÇƒÖcz do naszej spo≈Çeczno≈õci na Discordzie.">
    <meta name="keywords" content="anime, manga, discord, spo≈Çeczno≈õƒá, japonia, kultura japo≈Ñska, kroniki elary, serwer discord">
    <meta name="author" content="Arcadius & Stra≈ºnicy Kronik Elary">
    <title>Kroniki Elary - Strona G≈Ç√≥wna</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600&display=swap" rel="stylesheet">
    <style>
        /* Twoje istniejƒÖce style CSS */
        :root {
            --bg-primary: #0F172A;
            --bg-secondary: rgba(30, 41, 59, 0.8);
            --bg-card: #1E293B;
            --bg-header: rgba(15, 23, 42, 0.92);
            --text-primary: #E2E8F0;
            --text-secondary: #94A3B8;
            --text-accent: #A78BFA;
            --text-accent-hover: #8B5CF6;
            --border-accent: #8B5CF6;
            --border-card: rgba(167, 139, 250, 0.25);
            --btn-primary-bg: #8B5CF6;
            --btn-primary-hover-bg: #7C3AED;
            --btn-discord-bg: #5865F2;
            --btn-discord-hover-bg: #4752C4;
            --scrollbar-thumb-bg: #8B5CF6;
            --scrollbar-thumb-hover-bg: #7C3AED;
            --svg-icon-fill: #E2E8F0;
            --shadow-color: rgba(167, 139, 250, 0.25);
            --shadow-strong-color: rgba(167, 139, 250, 0.4);
            --modal-backdrop: rgba(15, 23, 42, 0.85);
            --rgb-accent: 167, 139, 250;
            --rgb-purple-400: 167, 139, 250; 
            --rgb-stone-400: 168, 162, 158; 
            --rgb-amber-400: 251, 191, 36; 
            --rgb-cyan-400: 34, 211, 238; 
            --text-purple-400: #A78BFA;
            --text-stone-400: #A8A29E;
            --text-amber-400: #FBBF24;
            --text-cyan-400: #22D3EE;
        }
        html.light {
            --bg-primary: #F9FAFB;
            --bg-secondary: rgba(243, 244, 246, 0.9);
            --bg-card: #FFFFFF;
            --bg-header: rgba(255, 255, 255, 0.95);
            --text-primary: #1F2937;
            --text-secondary: #4B5563;
            --text-accent: #7C3AED;
            --text-accent-hover: #6D28D9;
            --border-accent: #7C3AED;
            --border-card: rgba(124, 58, 237, 0.1);
            --btn-primary-bg: #7C3AED;
            --btn-primary-hover-bg: #6D28D9;
            --btn-discord-bg: #5865F2;
            --btn-discord-hover-bg: #4752C4;
            --scrollbar-thumb-bg: #A78BFA;
            --scrollbar-thumb-hover-bg: #8B5CF6;
            --svg-icon-fill: #374151;
            --shadow-color: rgba(124, 58, 237, 0.08);
            --shadow-strong-color: rgba(124, 58, 237, 0.15);
            --modal-backdrop: rgba(249, 250, 251, 0.85);
            --rgb-accent: 124, 58, 237;
            --rgb-purple-400: 124, 58, 237;
            --rgb-stone-400: 120, 113, 108;
            --rgb-amber-400: 217, 119, 6;
            --rgb-cyan-400: 8, 145, 178;
            --text-purple-400: #7C3AED;
            --text-stone-400: #78716C;
            --text-amber-400: #D97706;
            --text-cyan-400: #0891B2;
        }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg-primary); color: var(--text-primary); transition: background-color 0.3s ease, color 0.3s ease; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; line-height: 1.75; }
        h1, h2, h3, h4, h5 { font-family: 'Lora', serif; font-weight: 600; line-height: 1.35; }
        h1 { letter-spacing: -0.025em; font-weight: 700; } h2 { letter-spacing: -0.02em; font-weight: 700; } h3 { font-weight: 600; }
        .hero-main-bg { background: linear-gradient(rgba(15, 23, 42, 0.92), rgba(15, 23, 42, 1)), url('https://placehold.co/1920x1080/0a0f1e/a78bfa?text=Witaj+w+Magicznym+≈öwiecie+Kronik+Elary') center/cover no-repeat fixed; }
        .section-bg { background-color: var(--bg-secondary); }
        .card-bg { background-color: var(--bg-card); transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275), box-shadow 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275), background-color 0.3s ease; border: 1px solid var(--border-card); box-shadow: 0 7px 18px -4px var(--shadow-color); overflow: hidden; }
        .card-bg:hover { transform: translateY(-10px) scale(1.035); box-shadow: 0 16px 32px -6px var(--shadow-strong-color); }
        .btn-primary, .btn-discord, .btn-secondary { color: #FFFFFF; transition: background-color 0.25s ease, transform 0.25s ease, box-shadow 0.25s ease; box-shadow: 0 5px 12px -3px var(--shadow-color); font-weight: 600; letter-spacing: 0.03em; padding-top: 0.85rem; padding-bottom: 0.85rem; border-radius: 0.5rem; }
        .btn-primary { background-color: var(--btn-primary-bg); } .btn-primary:hover { background-color: var(--btn-primary-hover-bg); transform: scale(1.06) translateY(-3px); box-shadow: 0 14px 24px -5px var(--shadow-strong-color); }
        .btn-discord { background-color: var(--btn-discord-bg); } .btn-discord:hover { background-color: var(--btn-discord-hover-bg); transform: scale(1.06) translateY(-3px); box-shadow: 0 10px 20px -5px rgba(88, 101, 242, 0.4); }
        .btn-secondary { background-color: transparent; border: 2px solid var(--border-accent); color: var(--text-accent); padding: calc(0.85rem - 2px) calc(1.5rem - 2px); }
        .btn-secondary:hover { background-color: var(--border-accent); color: white; transform: scale(1.05) translateY(-1px); box-shadow: 0 8px 15px -3px var(--shadow-color); }
        .text-accent { color: var(--text-accent); }
        .reveal { opacity: 0; transform: translateY(70px); transition: opacity 1s cubic-bezier(0.645, 0.045, 0.355, 1), transform 1s cubic-bezier(0.645, 0.045, 0.355, 1); }
        .reveal.visible { opacity: 1; transform: translateY(0); }
        ::-webkit-scrollbar { width: 13px; } ::-webkit-scrollbar-track { background: var(--bg-primary); }
        ::-webkit-scrollbar-thumb { background: var(--scrollbar-thumb-bg); border-radius: 7px; border: 3.5px solid var(--bg-primary); }
        ::-webkit-scrollbar-thumb:hover { background: var(--scrollbar-thumb-hover-bg); }
        header#navbar { background-color: var(--bg-header); backdrop-filter: blur(18px); transition: background-color 0.3s ease, box-shadow 0.3s ease; box-shadow: 0 5px 15px -4px rgba(15,23,42,0.2); }
        .nav-link { position: relative; color: var(--text-secondary); transition: color 0.2s ease, background-color 0.2s ease, transform 0.2s ease; padding: 0.65rem 1.1rem; border-radius: 0.6rem; font-weight: 500; }
        .nav-link:hover { transform: translateY(-1px); }
        .nav-link::after { content: ''; position: absolute; width: 0; height: 3px; bottom: 5px; left: 50%; transform: translateX(-50%); background-color: var(--text-accent); transition: width 0.35s cubic-bezier(0.25, 0.8, 0.25, 1); border-radius: 1.5px; }
        .nav-link:hover, .nav-link.active { color: var(--text-accent); background-color: rgba(var(--rgb-accent), 0.12); }
        .nav-link:hover::after, .nav-link.active::after { width: 60%; }
        #mobileMenu { transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1), opacity 0.4s cubic-bezier(0.25, 0.8, 0.25, 1); transform: translateY(-100%); opacity: 0; pointer-events: none; }
        #mobileMenu.open { transform: translateY(0); opacity: 1; pointer-events: auto; }
        html.dark .text-shadow-custom { text-shadow: 1px 1px 4px rgba(0,0,0,0.6); }
        .user-avatar { width: 32px; height: 32px; border-radius: 50%; border: 2px solid var(--border-accent); cursor: pointer; transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; }
        .user-avatar:hover { transform: scale(1.1); box-shadow: 0 0 10px var(--shadow-strong-color); }
        .dropdown-menu { position: absolute; top: calc(100% + 0.5rem); right: 0; background-color: var(--bg-card); border: 1px solid var(--border-card); border-radius: 0.5rem; box-shadow: 0 10px 25px -5px var(--shadow-strong-color), 0 8px 10px -6px var(--shadow-color); z-index: 50; min-width: 220px; opacity: 0; visibility: hidden; transform: translateY(-10px); transition: opacity 0.2s ease, transform 0.2s ease, visibility 0s linear 0.2s; }
        .dropdown-menu.open { opacity: 1; visibility: visible; transform: translateY(0); transition: opacity 0.2s ease, transform 0.2s ease; }
        .dropdown-menu a, .dropdown-menu button { display: block; width: 100%; text-align: left; padding: 0.75rem 1rem; font-size: 0.875rem; color: var(--text-secondary); transition: background-color 0.15s ease, color 0.15s ease; }
        .dropdown-menu a:hover, .dropdown-menu button:hover { background-color: rgba(var(--rgb-accent), 0.1); color: var(--text-accent); }
        .dropdown-menu form { margin: 0; } 
        .modal { background-color: var(--modal-backdrop); backdrop-filter: blur(8px); }
        .modal-content { background-color: var(--bg-card); max-height: 90vh; }
        .animated-gradient-text { background: linear-gradient(45deg, var(--text-accent), var(--text-accent-hover), #c084fc, var(--text-accent)); background-size: 200% 200%; -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; animation: gradient-flow 8s ease infinite; }
        @keyframes gradient-flow { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        .feature-icon { font-size: 2.5rem; margin-bottom: 0.75rem; transition: transform 0.3s ease-in-out; }
        .card-bg:hover .feature-icon { transform: scale(1.15) rotate(5deg); }
        .news-item, .event-item { border-bottom: 1px solid var(--border-card); padding-bottom: 1rem; margin-bottom: 1rem; }
        .news-item:last-child, .event-item:last-child { border-bottom: none; margin-bottom: 0; }
        .stat-item { background-color: rgba(var(--rgb-accent), 0.1); padding: 1.5rem; border-radius: 0.75rem; text-align: center; transition: background-color 0.3s ease; }
        .stat-item:hover { background-color: rgba(var(--rgb-accent), 0.2); }
        .stat-number { font-size: 2.5rem; font-weight: 700; color: var(--text-accent); line-height: 1; }
        .stat-label { font-size: 0.875rem; color: var(--text-secondary); margin-top: 0.5rem; }
        .gallery-item img { transition: transform 0.3s ease, filter 0.3s ease; }
        .gallery-item:hover img { transform: scale(1.05); filter: brightness(1.1); }
        .loading-spinner { border-color: var(--text-accent) transparent var(--text-accent) transparent; }
    </style>
</head>
<body class="antialiased">

    <header id="navbar" class="fixed top-0 left-0 right-0 z-50 py-3">
        <div class="container mx-auto px-4 sm:px-6 flex justify-between items-center">
            <a href="index.html" class="text-3xl font-bold" aria-label="Strona g≈Ç√≥wna Kronik Elary">
                <span class="text-accent">Kroniki</span> <span class="text-primary">Elary</span>
            </a>
            <nav class="hidden md:flex items-center space-x-1 lg:space-x-2">
                <a href="index.html" class="nav-link">Strona G≈Ç√≥wna</a>
                <a href="prezentacja.html" class="nav-link">Prezentacja Serwera</a>
                <a href="wikipedia.html" class="nav-link">Wikipedia Kronik</a> 
                <a href="ranking-stats.html" class="nav-link">Rankingi</a>
                <div id="auth-section-nav" class="ml-4 relative">
                    </div>
            </nav>
            <div class="md:hidden flex items-center">
                 <div id="auth-section-mobile-nav" class="mr-2 relative">
                    </div>
                <button id="mobileMenuButton" class="p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[var(--bg-header)] focus:ring-[var(--text-accent)]" aria-expanded="false" aria-controls="mobileMenu" aria-label="Otw√≥rz menu nawigacyjne">
                    <svg class="w-6 h-6" fill="none" stroke="var(--svg-icon-fill)" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </div>
        </div>
        <div id="mobileMenu" class="absolute top-full left-0 right-0 md:hidden shadow-lg" style="background-color: var(--bg-header);">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="index.html" class="block py-2.5 px-3 nav-link text-base font-medium">Strona G≈Ç√≥wna</a>
                <a href="prezentacja.html" class="block py-2.5 px-3 nav-link text-base font-medium">Prezentacja Serwera</a>
                <a href="wikipedia.html" class="block py-2.5 px-3 nav-link text-base font-medium">Wikipedia Kronik</a>
                <a href="ranking-stats.html" class="block py-2.5 px-3 nav-link text-base font-medium">Rankingi</a>
                <a href="https://discord.gg/TWOJLINKZAPROSZENIOWY" target="_blank" rel="noopener noreferrer" class="block mt-2 py-2.5 px-3 text-base font-medium text-white bg-purple-600 hover:bg-purple-700 rounded-md text-center">Do≈ÇƒÖcz do Discorda</a>
                 </div>
        </div>
    </header>

    <main>
        <section class="hero-main-bg min-h-screen flex items-center justify-center text-center pt-24 sm:pt-20 reveal">
            <div class="container mx-auto px-4 sm:px-6 py-16">
                <h1 class="text-5xl sm:text-6xl md:text-7xl font-bold text-white mb-6 leading-tight text-shadow-custom">
                    Witaj w <span class="animated-gradient-text">Kronikach Elary</span>!
                </h1>
                <p class="text-xl md:text-2xl text-slate-200 mb-10 max-w-3xl mx-auto text-shadow-custom">
                    Twoja przysta≈Ñ w magicznym ≈õwiecie anime, mangi i japo≈Ñskiej kultury. Odkrywaj, dyskutuj i tw√≥rz razem z nami!
                </p>
                <div class="space-y-4 sm:space-y-0 sm:space-x-4">
                    <a href="prezentacja.html" class="btn-secondary font-semibold py-3.5 sm:py-4 px-8 sm:px-10 inline-block shadow-xl">
                        Odkryj Pe≈ÇnƒÖ Prezentacjƒô
                    </a>
                    <a href="https://discord.gg/TWOJLINKZAPROSZENIOWY" target="_blank" rel="noopener noreferrer" class="btn-primary font-semibold py-3.5 sm:py-4 px-8 sm:px-10 inline-block shadow-xl">
                        Do≈ÇƒÖcz do Nas na Discordzie!
                    </a>
                </div>
            </div>
        </section>

        <section id="co-nas-wyroznia" class="py-16 sm:py-24 reveal">
            <div class="container mx-auto px-4 sm:px-6">
                <div class="text-center mb-12 sm:mb-16">
                    <h2 class="text-3xl sm:text-4xl font-bold text-primary mb-4">Co Nas <span class="text-accent">Wyr√≥≈ºnia?</span></h2>
                    <p class="text-lg text-secondary max-w-3xl mx-auto">
                        Kroniki Elary to wiƒôcej ni≈º serwer Discord. To unikalne uniwersum, kt√≥re wsp√≥lnie tworzymy ka≈ºdego dnia.
                    </p>
                </div>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="card-bg p-6 rounded-xl reveal flex flex-col items-center text-center">
                        <div class="feature-icon text-purple-400 mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" class="bi bi-stars" viewBox="0 0 16 16">
                                <path d="M7.657 6.247c.11-.33.576-.33.686 0l.645 1.937a2.89 2.89 0 0 0 1.829 1.828l1.936.645c.33.11.33.576 0 .686l-1.937.645a2.89 2.89 0 0 0-1.828 1.829l-.645 1.936a.361.361 0 0 1-.686 0l-.645-1.937a2.89 2.89 0 0 0-1.828-1.828l-1.937-.645a.361.361 0 0 1 0-.686l1.937-.645a2.89 2.89 0 0 0 1.828-1.828zM11.543 1.232c.1-.3.55-.3.65 0l.374 1.12a2.625 2.625 0 0 0 1.663 1.664l1.12.373a.33.33 0 0 1 0 .65l-1.12.373a2.625 2.625 0 0 0-1.663 1.664l-.374 1.12a.33.33 0 0 1-.65 0l-.374-1.12a2.625 2.625 0 0 0-1.663-1.664L8.43 3.367a.33.33 0 0 1 0-.65l1.12-.374a2.625 2.625 0 0 0 1.663-1.664zM3.632 9.03c.1-.3.55-.3.65 0l.374 1.12a2.625 2.625 0 0 0 1.663 1.664l1.12.373a.33.33 0 0 1 0 .65l-1.12.373a2.625 2.625 0 0 0-1.663 1.664l-.374 1.12a.33.33 0 0 1-.65 0l-.374-1.12a2.625 2.625 0 0 0-1.663-1.664L.43 12.133a.33.33 0 0 1 0-.65l1.12-.374a2.625 2.625 0 0 0 1.663-1.664z"/>
                            </svg>
                        </div>
                        <h3 class="text-xl font-semibold text-primary mb-2">Autorskie Uniwersum Fabularne</h3>
                        <p class="text-sm text-secondary">Zanurz siƒô w bogatej historii Aethelgardu, poznaj jego bohater√≥w i tw√≥rz w≈Çasne opowie≈õci w naszym ≈õwiecie roleplay.</p>
                    </div>
                    <div class="card-bg p-6 rounded-xl reveal flex flex-col items-center text-center" style="transition-delay: 0.1s;">
                        <div class="feature-icon text-cyan-400 mb-4">
                             <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" class="bi bi-robot" viewBox="0 0 16 16">
                                <path d="M6 12.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5M3 8.062C3 6.76 4.235 5.765 5.53 5.5H6.5v1H5.53c-.817.178-1.03 1.03-1.03 1.562v.062H5V10H3.5v-.938H3z"/>
                                <path d="M0 1.5A.5.5 0 0 1 .5 1h15a.5.5 0 0 1 0 1H.5A.5.5 0 0 1 0 1.5M3 13.5V10h1v3.5a.5.5 0 0 1-1 0M13 13.5V10h1v3.5a.5.5 0 0 1-1 0M10.5 5.5c1.295.235 2.53.235 2.53.235V7.5h1V5.5s1.235 0 2.53-.235A2.5 2.5 0 0 0 15.5 3H14v-.5a.5.5 0 0 0-1 0V3H4v-.5a.5.5 0 0 0-1 0V3H1.5A2.5 2.5 0 0 0 .52 5.265C1.765 5.5 3 5.5 3 5.5V7.5h1V5.5s1.235 0 2.53-.235A2.5 2.5 0 0 0 7.5 3H8v2.5H6.5z"/>
                            </svg>
                        </div>
                        <h3 class="text-xl font-semibold text-primary mb-2">Zaawansowane Boty Pomocnicze</h3>
                        <p class="text-sm text-secondary">Nasze autorskie boty, jak Lyra czy Runa, oferujƒÖ unikalne funkcje, systemy ekonomii, gry i wiele wiƒôcej, wzbogacajƒÖc do≈õwiadczenie na serwerze.</p>
                    </div>
                    <div class="card-bg p-6 rounded-xl reveal flex flex-col items-center text-center" style="transition-delay: 0.2s;">
                        <div class="feature-icon text-amber-400 mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" class="bi bi-people-fill" viewBox="0 0 16 16">
                                <path d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1zM4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6m-5.784 6A2.24 2.24 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.3 6.3 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1zM4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5"/>
                            </svg>
                        </div>
                        <h3 class="text-xl font-semibold text-primary mb-2">Przyjazna i Zaanga≈ºowana Spo≈Çeczno≈õƒá</h3>
                        <p class="text-sm text-secondary">Przede wszystkim cenimy sobie atmosferƒô wzajemnego szacunku, otwarto≈õci i pasji, kt√≥rƒÖ dzielimy z ka≈ºdym nowym cz≈Çonkiem Kronik.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="aktualnosci" class="py-16 sm:py-24 section-bg reveal">
            <div class="container mx-auto px-4 sm:px-6">
                <div class="text-center mb-12 sm:mb-16">
                    <h2 class="text-3xl sm:text-4xl font-bold text-primary mb-4">Najnowsze <span class="text-accent">Aktualno≈õci</span></h2>
                    <p class="text-lg text-secondary max-w-2xl mx-auto">
                        BƒÖd≈∫ na bie≈ºƒÖco z tym, co dzieje siƒô w ≈õwiecie Kronik Elary i naszej spo≈Çeczno≈õci!
                    </p>
                </div>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="card-bg p-6 rounded-xl reveal">
                        <img src="https://placehold.co/600x400/1E293B/a78bfa?text=Nowy+Event" alt="Grafika aktualno≈õci 1" class="rounded-lg mb-4 w-full h-48 object-cover" onerror="this.onerror=null;this.src='https://placehold.co/600x400/0F172A/94A3B8?text=Brak+obrazka';">
                        <h3 class="text-xl font-semibold text-primary mb-2">Wielki Turniej Fanart√≥w Rozpoczƒôty!</h3>
                        <p class="text-xs text-secondary mb-3">Opublikowano: 25 maja 2025</p>
                        <p class="text-sm text-secondary mb-4">Przygotujcie swoje tablety i kredki! Ruszy≈Ç nasz coroczny konkurs na najlepszy fanart inspirowany Kronikami Elary. Nagrody czekajƒÖ!</p>
                        <a href="#" class="text-accent hover:text-accent-hover font-semibold text-sm">Czytaj wiƒôcej &rarr;</a>
                    </div>
                    <div class="card-bg p-6 rounded-xl reveal" style="transition-delay: 0.1s;">
                        <img src="https://placehold.co/600x400/1E293B/8B5CF6?text=Aktualizacja+Bota" alt="Grafika aktualno≈õci 2" class="rounded-lg mb-4 w-full h-48 object-cover" onerror="this.onerror=null;this.src='https://placehold.co/600x400/0F172A/94A3B8?text=Brak+obrazka';">
                        <h3 class="text-xl font-semibold text-primary mb-2">Nowe Funkcje Bota Runa!</h3>
                        <p class="text-xs text-secondary mb-3">Opublikowano: 20 maja 2025</p>
                        <p class="text-sm text-secondary mb-4">Nasza Techno-Zaklinaczka Runa nie pr√≥≈ºnuje! Wprowadzili≈õmy nowe komendy i ulepszenia dla naszego g≈Ç√≥wnego bota. Sprawd≈∫cie koniecznie!</p>
                        <a href="wikipedia.html#systemy-botow" class="text-accent hover:text-accent-hover font-semibold text-sm">Zobacz zmiany &rarr;</a>
                    </div>
                    <div class="card-bg p-6 rounded-xl reveal" style="transition-delay: 0.2s;">
                         <img src="https://placehold.co/600x400/1E293B/7C3AED?text=Spotkanie+Spo≈Çeczno≈õci" alt="Grafika aktualno≈õci 3" class="rounded-lg mb-4 w-full h-48 object-cover" onerror="this.onerror=null;this.src='https://placehold.co/600x400/0F172A/94A3B8?text=Brak+obrazka';">
                        <h3 class="text-xl font-semibold text-primary mb-2">Podsumowanie Majowego Spotkania</h3>
                        <p class="text-xs text-secondary mb-3">Opublikowano: 15 maja 2025</p>
                        <p class="text-sm text-secondary mb-4">Dziƒôkujemy wszystkim za udzia≈Ç w ostatnim spotkaniu spo≈Çeczno≈õci! Om√≥wili≈õmy wiele ciekawych pomys≈Ç√≥w. Zobaczcie podsumowanie i plany na przysz≈Ço≈õƒá.</p>
                        <a href="#" class="text-accent hover:text-accent-hover font-semibold text-sm">Przeczytaj podsumowanie &rarr;</a>
                    </div>
                </div>
            </div>
        </section>

        <section id="galeria-tworczosci" class="py-16 sm:py-24 reveal">
            <div class="container mx-auto px-4 sm:px-6">
                <div class="text-center mb-12 sm:mb-16">
                    <h2 class="text-3xl sm:text-4xl font-bold text-primary mb-4">Galeria <span class="text-accent">Tw√≥rczo≈õci Spo≈Çeczno≈õci</span></h2>
                    <p class="text-lg text-secondary max-w-2xl mx-auto">
                        Zobaczcie, jakie niesamowite dzie≈Ça powstajƒÖ w Kronikach Elary dziƒôki talentom naszych cz≈Çonk√≥w!
                    </p>
                </div>
                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
                    <div class="gallery-item card-bg rounded-lg overflow-hidden aspect-square reveal">
                        <img src="https://placehold.co/400x400/1E293B/a78bfa?text=Fanart+1" alt="Przyk≈Çadowy fanart 1" class="w-full h-full object-cover" onerror="this.onerror=null;this.src='https://placehold.co/400x400/0F172A/94A3B8?text=Art';">
                    </div>
                    <div class="gallery-item card-bg rounded-lg overflow-hidden aspect-square reveal" style="transition-delay: 0.05s;">
                        <img src="https://placehold.co/400x400/1E293B/8B5CF6?text=Cosplay" alt="Przyk≈Çadowy cosplay" class="w-full h-full object-cover" onerror="this.onerror=null;this.src='https://placehold.co/400x400/0F172A/94A3B8?text=Art';">
                    </div>
                    <div class="gallery-item card-bg rounded-lg overflow-hidden aspect-square reveal" style="transition-delay: 0.1s;">
                        <img src="https://placehold.co/400x400/1E293B/7C3AED?text=Fanart+2" alt="Przyk≈Çadowy fanart 2" class="w-full h-full object-cover" onerror="this.onerror=null;this.src='https://placehold.co/400x400/0F172A/94A3B8?text=Art';">
                    </div>
                    <div class="gallery-item card-bg rounded-lg overflow-hidden aspect-square reveal" style="transition-delay: 0.15s;">
                        <img src="https://placehold.co/400x400/1E293B/A78BFA?text=Scenka+RP" alt="Przyk≈Çadowa scenka RP" class="w-full h-full object-cover" onerror="this.onerror=null;this.src='https://placehold.co/400x400/0F172A/94A3B8?text=Art';">
                    </div>
                </div>
                 <div class="text-center mt-12 sm:mt-16">
                    <a href="#" class="btn-primary font-semibold py-3 px-6 text-md">Zobacz Wiƒôcej Prac</a>
                </div>
            </div>
        </section>

        <section id="kalendarz-wydarzen" class="py-16 sm:py-24 section-bg reveal">
            <div class="container mx-auto px-4 sm:px-6">
                <div class="text-center mb-12 sm:mb-16">
                    <h2 class="text-3xl sm:text-4xl font-bold text-primary mb-4">Kalendarz <span class="text-accent">Wydarze≈Ñ</span></h2>
                    <p class="text-lg text-secondary max-w-2xl mx-auto">
                        Nie przegap ≈ºadnego magicznego momentu! Sprawd≈∫, co planujemy w najbli≈ºszym czasie.
                    </p>
                </div>
                <div class="bg-bg-card p-6 sm:p-8 rounded-2xl shadow-xl">
                    <div class="event-item flex flex-col sm:flex-row items-start sm:items-center space-y-3 sm:space-y-0 sm:space-x-6">
                        <div class="bg-accent/10 text-accent p-4 rounded-lg text-center w-full sm:w-auto">
                            <div class="text-3xl font-bold">01</div>
                            <div class="text-sm uppercase">Cze</div>
                        </div>
                        <div class="flex-grow">
                            <h4 class="text-xl font-semibold text-primary">Wiecz√≥r Filmowy: Klasyka Anime</h4>
                            <p class="text-sm text-secondary">Godzina: 20:00 | Kana≈Ç: #üé¨-sala-kinowa</p>
                            <p class="text-xs text-secondary mt-1">Wsp√≥lne oglƒÖdanie kultowego filmu anime wybranego przez spo≈Çeczno≈õƒá.</p>
                        </div>
                        <a href="#" class="btn-secondary text-sm py-2 px-4 whitespace-nowrap">Szczeg√≥≈Çy</a>
                    </div>
                    <div class="event-item flex flex-col sm:flex-row items-start sm:items-center space-y-3 sm:space-y-0 sm:space-x-6 pt-6">
                        <div class="bg-amber-400/10 text-amber-400 p-4 rounded-lg text-center w-full sm:w-auto">
                            <div class="text-3xl font-bold">15</div>
                            <div class="text-sm uppercase">Cze</div>
                        </div>
                        <div class="flex-grow">
                            <h4 class="text-xl font-semibold text-primary">Konkurs Wiedzy o Manga</h4>
                            <p class="text-sm text-secondary">Godzina: 18:00 | Kana≈Ç: #üéâ-arena-igraszek</p>
                            <p class="text-xs text-secondary mt-1">Sprawd≈∫ swojƒÖ wiedzƒô i wygraj Gwiezdne Dukaty! Pytania z r√≥≈ºnych gatunk√≥w mangi.</p>
                        </div>
                        <a href="#" class="btn-secondary text-sm py-2 px-4 whitespace-nowrap">Do≈ÇƒÖcz do Zabawy</a>
                    </div>
                     <div class="event-item flex flex-col sm:flex-row items-start sm:items-center space-y-3 sm:space-y-0 sm:space-x-6 pt-6">
                        <div class="bg-cyan-400/10 text-cyan-400 p-4 rounded-lg text-center w-full sm:w-auto">
                            <div class="text-3xl font-bold">28</div>
                            <div class="text-sm uppercase">Cze</div>
                        </div>
                        <div class="flex-grow">
                            <h4 class="text-xl font-semibold text-primary">Sesja Q&A z AdministracjƒÖ</h4>
                            <p class="text-sm text-secondary">Godzina: 19:00 | Kana≈Ç: #üó£Ô∏è-g≈Ços-ludu</p>
                            <p class="text-xs text-secondary mt-1">Masz pytania do Stra≈ºnik√≥w? To idealna okazja, aby je zadaƒá!</p>
                        </div>
                        <a href="#" class="btn-secondary text-sm py-2 px-4 whitespace-nowrap">Szczeg√≥≈Çy</a>
                    </div>
                </div>
            </div>
        </section>

        <section id="statystyki-serwera" class="py-16 sm:py-24 reveal">
            <div class="container mx-auto px-4 sm:px-6">
                <div class="text-center mb-12 sm:mb-16">
                    <h2 class="text-3xl sm:text-4xl font-bold text-primary mb-4">Nasze Kroniki w <span class="text-accent">Liczbach</span></h2>
                    <p class="text-lg text-secondary max-w-2xl mx-auto">
                        Zobacz, jak dynamicznie rozwija siƒô nasza spo≈Çeczno≈õƒá!
                    </p>
                </div>
                <div id="statsContainer" class="grid grid-cols-2 md:grid-cols-4 gap-6">
                    <div class="text-center py-6 col-span-full">
                        <div class="animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 loading-spinner mx-auto mb-2"></div>
                        <p class="text-secondary">≈Åadowanie statystyk...</p>
                    </div>
                </div>
                <div id="statsLoadingError" class="hidden text-red-400 bg-red-900/50 p-3 rounded-md mt-4"></div>
            </div>
        </section>
        
        <section id="dolacz-skrot" class="py-16 sm:py-24 section-bg reveal">
            <div class="container mx-auto px-4 sm:px-6 text-center">
                <h2 class="text-3xl sm:text-4xl font-bold text-primary mb-6">Got√≥w RozpoczƒÖƒá Przygodƒô?</h2>
                <p class="text-lg text-secondary mb-10 max-w-xl mx-auto">
                    Do≈ÇƒÖcz do naszej rosnƒÖcej spo≈Çeczno≈õci na Discordzie. CzekajƒÖ na Ciebie niezapomniane dyskusje, nowi przyjaciele i magiczny ≈õwiat Kronik Elary!
                </p>
                <a href="https://discord.gg/TWOJLINKZAPROSZENIOWY" target="_blank" rel="noopener noreferrer" class="btn-discord font-semibold py-4 px-10 text-lg inline-flex items-center shadow-xl">
                    <svg class="w-6 h-6 mr-3" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.297 0H3.703C1.658 0 0 1.658 0 3.703V20.297C0 22.342 1.658 24 3.703 24H20.297C22.342 24 24 22.342 24 20.297V3.703C24 1.658 22.342 0 20.297 0ZM8.107 15.232C7.089 15.232 6.241 14.384 6.241 13.366C6.241 12.348 7.089 11.5 8.107 11.5C9.125 11.5 9.973 12.348 9.973 13.366C9.973 14.384 9.125 15.232 8.107 15.232ZM12.000 11.071C10.982 11.071 10.134 10.223 10.134 9.205C10.134 8.188 10.982 7.339 12.000 7.339C13.018 7.339 13.866 8.188 13.866 9.205C13.866 10.223 13.018 11.071 12.000 11.071ZM15.893 15.232C14.875 15.232 14.027 14.384 14.027 13.366C14.027 12.348 14.875 11.5 15.893 11.5C16.911 11.5 17.759 12.348 17.759 13.366C17.759 14.384 16.911 15.232 15.893 15.232Z"/></svg>
                    Wejd≈∫ do Kr√≥lestwa Kronik
                </a>
            </div>
        </section>
    </main>

    <footer class="py-12 text-center" style="background-color: var(--bg-header);">
        <div class="container mx-auto px-4 sm:px-6">
            <div class="flex justify-center space-x-6 mb-6">
                <a href="#" class="text-secondary hover:text-accent transition-colors duration-200" aria-label="Placeholder Twitter">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M22.46 6c-.77.35-1.6.58-2.46.67.9-.53 1.59-1.37 1.92-2.38-.84.5-1.78.86-2.79 1.07C18.28 4.42 17.03 4 15.64 4c-2.94 0-5.32 2.38-5.32 5.32 0 .42.05.83.14 1.22-4.42-.22-8.33-2.34-10.96-5.55-.46.79-.72 1.7-.72 2.67 0 1.84.94 3.47 2.37 4.42-.87-.03-1.69-.27-2.41-.66v.07c0 2.57 1.83 4.72 4.25 5.21-.44.12-.91.18-1.39.18-.34 0-.67-.03-1-.1 0 .67.65 1.37 1.77 1.84-.7.55-1.59.88-2.58.88-.39 0-.77-.02-1.14-.07.91.59 2 1.02 3.19 1.02 3.83 0 5.93-3.18 5.93-5.93 0-.09 0-.18-.01-.27.41-.3.76-.68 1.04-1.09z"/></svg>
                </a>
                 <a href="#" class="text-secondary hover:text-accent transition-colors duration-200" aria-label="Placeholder Instagram">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 1.17.053 1.805.248 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.167.422.362 1.056.415 2.227.058 1.266.07 1.646.07 4.85s-.012 3.584-.07 4.85c-.053 1.17-.248 1.805-.415 2.227a3.48 3.48 0 01-.896 1.382c-.42.419-.82.679-1.382.896-.422.167-1.056.362-2.227.415-1.266.058-1.646.07-4.85.07s-3.584-.012-4.85-.07c-1.17-.053-1.805-.248-2.227-.415a3.492 3.492 0 01-1.381-.896 3.492 3.492 0 01-.896-1.381c-.167-.422-.362-1.056-.415-2.227-.058-1.266-.07-1.646-.07-4.85s.012-3.584.07-4.85c.053-1.17.248-1.805.415-2.227.218-.562.477-.96.896-1.381.419-.42.819-.679 1.381-.896.422-.167 1.056-.362 2.227-.415C8.416 2.175 8.796 2.163 12 2.163zm0 1.802c-3.143 0-3.505.012-4.725.068-1.09.05-1.647.235-1.98.378a1.69 1.69 0 00-.755.755c-.143.333-.328.89-.378 1.98C4.082 8.495 4.07 8.857 4.07 12s.012 3.505.068 4.725c.05 1.09.235 1.647.378 1.98.16.373.397.637.755.755.333.143.89.328 1.98.378 1.22.056 1.582.068 4.725.068s3.505-.012 4.725-.068c1.09-.05 1.647.235 1.98-.378.373-.16.637-.397.755-.755.143-.333.328.89.378-1.98.056-1.22.068-1.582.068-4.725s-.012-3.505-.068-4.725c-.05-1.09-.235-1.647-.378-1.98a1.69 1.69 0 00-.755-.755c-.333-.143-.89-.328-1.98-.378C15.505 3.977 15.143 3.965 12 3.965zm0 3.273a4.762 4.762 0 100 9.524 4.762 4.762 0 000-9.524zm0 7.722a3.06 3.06 0 110-6.12 3.06 3.06 0 010 6.12zm4.758-7.868a1.128 1.128 0 100-2.255 1.128 1.128 0 000 2.255z"/></svg>
                </a>
                 <a href="polityka-prywatnosci.html" class="text-secondary hover:text-accent transition-colors duration-200" aria-label="Polityka Prywatno≈õci">
                    Polityka Prywatno≈õci
                </a>
            </div>
            <p class="text-secondary text-sm">
                &copy; <span id="currentYear">2024</span> Kroniki Elary. Wszelkie prawa zastrze≈ºone.
            </p>
            <p class="text-xs mt-2.5" style="color: var(--text-secondary-light, #94A3B8);">
                Stworzone z pasji do anime i mangi przez Arcadiusa i jego Stra≈ºnik√≥w.
            </p>
        </div>
    </footer>

    <div id="eventModal" class="fixed inset-0 z-[60] items-center justify-center hidden p-4 modal">
        </div>

    <script>
        // Funkcja do obs≈Çugi aktywnego linku w nawigacji
        function setActiveNavLink() {
            const currentPage = window.location.pathname.split("/").pop() || "index.html";
            const navLinks = document.querySelectorAll('header nav > a.nav-link, #mobileMenu > div > a.nav-link');
            const wikipediaSubPages = ["lore-postaci.html", "systemy-botow.html", "rangi-i-role.html", "lore-aethelgard.html", "komendy.html"];

            navLinks.forEach(link => {
                link.classList.remove('active');
                const linkPage = link.getAttribute('href').split("/").pop() || "index.html";
                
                if (linkPage === currentPage) {
                    link.classList.add('active');
                } else if (linkPage === 'wikipedia.html' && wikipediaSubPages.includes(currentPage)) {
                    link.classList.add('active');
                }
            });
        }

        async function updateAuthDisplay() {
            const authSectionNav = document.getElementById('auth-section-nav');
            const authSectionMobileNav = document.getElementById('auth-section-mobile-nav');
            const mobileMenuLinksContainer = document.querySelector('#mobileMenu > div'); 
            const ADMIN_DISCORD_ID = "1238814802357387285"; 

            function createLoginButton(isMobile = false) {
                const loginButton = document.createElement('a');
                loginButton.href = '/auth/discord/login'; 
                loginButton.id = isMobile ? 'discordLoginButtonMobileNav' : 'discordLoginButtonNav';
                loginButton.className = 'btn-discord !text-white px-4 py-2.5 rounded-md text-sm flex items-center' + (isMobile ? ' w-full justify-center mt-2' : '');
                loginButton.innerHTML = `<svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24"><path d="M20.297 0H3.703C1.658 0 0 1.658 0 3.703V20.297C0 22.342 1.658 24 3.703 24H20.297C22.342 24 24 22.342 24 20.297V3.703C24 1.658 22.342 0 20.297 0ZM8.107 15.232C7.089 15.232 6.241 14.384 6.241 13.366C6.241 12.348 7.089 11.5 8.107 11.5C9.125 11.5 9.973 12.348 9.973 13.366C9.973 14.384 9.125 15.232 8.107 15.232ZM12.000 11.071C10.982 11.071 10.134 10.223 10.134 9.205C10.134 8.188 10.982 7.339 12.000 7.339C13.018 7.339 13.866 8.188 13.866 9.205C13.866 10.223 13.018 11.071 12.000 11.071ZM15.893 15.232C14.875 15.232 14.027 14.384 14.027 13.366C14.027 12.348 14.875 11.5 15.893 11.5C16.911 11.5 17.759 12.348 17.759 13.366C17.759 14.384 16.911 15.232 15.893 15.232Z"/></svg> Zaloguj przez Discord`;
                return loginButton;
            }

            function createAvatarDropdown(user, isMobile = false) {
                const containerId = isMobile ? 'userDropdownContainerMobile' : 'userDropdownContainerNav';
                const dropdownId = isMobile ? 'userDropdownMobile' : 'userDropdownNav';

                const container = document.createElement('div');
                container.id = containerId;
                container.className = 'relative';

                const avatarImg = document.createElement('img');
                avatarImg.src = user.avatar ? `https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png?size=32` : 'https://placehold.co/32x32/A78BFA/FFFFFF?text=U';
                avatarImg.alt = 'Awatar u≈ºytkownika';
                avatarImg.className = 'user-avatar';
                avatarImg.onerror = () => { avatarImg.src = 'https://placehold.co/32x32/A78BFA/FFFFFF?text=U'; };
                avatarImg.onclick = (event) => {
                    event.stopPropagation(); 
                    const dropdown = document.getElementById(dropdownId);
                    if (dropdown) dropdown.classList.toggle('open');
                };
                container.appendChild(avatarImg);

                const dropdownMenu = document.createElement('div');
                dropdownMenu.id = dropdownId;
                dropdownMenu.className = 'dropdown-menu';
                
                const profileLink = document.createElement('a');
                profileLink.href = 'profil.html'; 
                profileLink.textContent = 'M√≥j Profil';
                dropdownMenu.appendChild(profileLink);

                const botShopLink = document.createElement('a');
                botShopLink.href = '/sklep-bota'; 
                botShopLink.textContent = 'Sklep Bota (Dukaty)';
                dropdownMenu.appendChild(botShopLink);
                
                const premiumShopLink = document.createElement('a');
                premiumShopLink.href = 'sklep-premium.html';
                premiumShopLink.textContent = 'Sklep Premium (Kryszta≈Çy)';
                dropdownMenu.appendChild(premiumShopLink);

                const supportTicketsLink = document.createElement('a');
                supportTicketsLink.href = 'support.html'; 
                supportTicketsLink.textContent = 'Centrum Wsparcia';
                dropdownMenu.appendChild(supportTicketsLink);

                if (user.id === ADMIN_DISCORD_ID) {
                    const adminLinkElement = document.createElement('a'); 
                    adminLinkElement.href = 'admin.html'; 
                    adminLinkElement.textContent = 'Panel Admina';
                    dropdownMenu.appendChild(adminLinkElement);
                }
                
                const logoutForm = document.createElement('form');
                logoutForm.action = '/auth/logout'; 
                logoutForm.method = 'POST';
                const logoutButton = document.createElement('button');
                logoutButton.type = 'submit';
                logoutButton.textContent = 'Wyloguj';
                logoutForm.appendChild(logoutButton);
                dropdownMenu.appendChild(logoutForm);

                container.appendChild(dropdownMenu);
                return container;
            }
            
            if (mobileMenuLinksContainer) {
                const existingMobileAuthElements = mobileMenuLinksContainer.querySelectorAll('#discordLoginButtonMobileNav, #userDropdownContainerMobileMenu, .mobile-auth-item');
                existingMobileAuthElements.forEach(el => el.remove());
            }

            try {
                const response = await fetch('/api/me'); 
                if (response.ok) {
                    const user = await response.json();
                    if (authSectionNav) {
                        authSectionNav.innerHTML = ''; 
                        authSectionNav.appendChild(createAvatarDropdown(user, false));
                    }
                    if (authSectionMobileNav) { 
                        authSectionMobileNav.innerHTML = ''; 
                        authSectionMobileNav.appendChild(createAvatarDropdown(user, true));
                    }
                     if (mobileMenuLinksContainer) {
                        const mobileDropdownContainer = createAvatarDropdown(user, true); 
                        mobileDropdownContainer.id = 'userDropdownContainerMobileMenu';
                        mobileDropdownContainer.classList.add('mt-2', 'border-t', 'border-[var(--border-card)]', 'pt-2', 'mobile-auth-item');
                        
                        const mobileAvatar = mobileDropdownContainer.querySelector('.user-avatar');
                        const mobileDropdown = mobileDropdownContainer.querySelector('.dropdown-menu');
                        
                        if (mobileAvatar) mobileAvatar.classList.add('hidden'); 
                        if (mobileDropdown) {
                            mobileDropdown.classList.remove('absolute', 'top-full', 'right-0', 'dropdown-menu'); 
                            mobileDropdown.classList.add('space-y-1');
                            Array.from(mobileDropdown.children).forEach(child => {
                                child.classList.add('block', 'py-2', 'px-3', 'text-base', 'font-medium', 'rounded-md', 'hover:bg-[rgba(var(--rgb-accent),0.1)]', 'hover:text-[var(--text-accent)]');
                                mobileMenuLinksContainer.appendChild(child);
                            });
                        }
                    }

                } else {
                     if (authSectionNav) {
                        authSectionNav.innerHTML = '';
                        authSectionNav.appendChild(createLoginButton(false));
                    }
                    if (authSectionMobileNav) { 
                        authSectionMobileNav.innerHTML = '';
                        authSectionMobileNav.appendChild(createLoginButton(true)); 
                    }
                    if (mobileMenuLinksContainer) {
                        const mobileLoginButton = createLoginButton(true); 
                        mobileLoginButton.classList.add('mt-2', 'border-t', 'border-[var(--border-card)]', 'pt-2', 'mobile-auth-item');
                        mobileMenuLinksContainer.appendChild(mobileLoginButton);
                    }
                }
            } catch (error) {
                console.error('B≈ÇƒÖd aktualizacji UI logowania:', error);
                 if (authSectionNav) {
                    authSectionNav.innerHTML = '';
                    authSectionNav.appendChild(createLoginButton(false));
                }
                if (authSectionMobileNav) {
                    authSectionMobileNav.innerHTML = '';
                    authSectionMobileNav.appendChild(createLoginButton(true));
                }
                if (mobileMenuLinksContainer) {
                    const mobileLoginButton = createLoginButton(true);
                    mobileLoginButton.classList.add('mt-2', 'border-t', 'border-[var(--border-card)]', 'pt-2', 'mobile-auth-item');
                    mobileMenuLinksContainer.appendChild(mobileLoginButton);
                }
            }
        }
        
        function setupMobileMenu() {
            const mobileMenuButton = document.getElementById('mobileMenuButton');
            const mobileMenu = document.getElementById('mobileMenu');
            
            if (mobileMenuButton && mobileMenu) {
                mobileMenuButton.addEventListener('click', () => {
                    const isExpanded = mobileMenuButton.getAttribute('aria-expanded') === 'true' || false;
                    mobileMenuButton.setAttribute('aria-expanded', String(!isExpanded));
                    mobileMenu.classList.toggle('open');
                });
                mobileMenu.querySelectorAll('a').forEach(link => { 
                    link.addEventListener('click', () => {
                        mobileMenuButton.setAttribute('aria-expanded', 'false');
                        mobileMenu.classList.remove('open');
                    });
                });
            }
        }

        function setupRevealAnimations() {
            const revealObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.reveal').forEach(el => {
                revealObserver.observe(el);
            });
        }

        function setupDropdownDismiss() {
            window.addEventListener('click', function(e) {
                const desktopDropdownContainer = document.getElementById('userDropdownContainerNav');
                const mobileDropdownContainer = document.getElementById('userDropdownContainerMobile'); 
                const desktopDropdown = document.getElementById('userDropdownNav');
                const mobileDropdown = document.getElementById('userDropdownMobile'); 

                if (desktopDropdownContainer && !desktopDropdownContainer.contains(e.target) && desktopDropdown && desktopDropdown.classList.contains('open')) {
                    desktopDropdown.classList.remove('open');
                }
                if (mobileDropdownContainer && !mobileDropdownContainer.contains(e.target) && mobileDropdown && mobileDropdown.classList.contains('open')) {
                     mobileDropdown.classList.remove('open');
                }
            });
        }

        async function loadServerStats() {
            const statsContainer = document.getElementById('statsContainer');
            const statsErrorContainer = document.getElementById('statsLoadingError');
            statsContainer.innerHTML = `
                <div class="text-center py-6 col-span-full">
                    <div class="animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 loading-spinner mx-auto mb-2"></div>
                    <p class="text-secondary">≈Åadowanie statystyk...</p>
                </div>`;
            statsErrorContainer.classList.add('hidden');

            try {
                const response = await fetch('/api/web/server-stats');
                if (!response.ok) {
                    throw new Error(`B≈ÇƒÖd serwera: ${response.status}`);
                }
                const stats = await response.json();

                if (stats && !stats.error) {
                    statsContainer.innerHTML = `
                        <div class="stat-item reveal">
                            <div class="stat-number">${stats.total_members || 0}</div>
                            <div class="stat-label">Cz≈Çonk√≥w Spo≈Çeczno≈õci</div>
                        </div>
                        <div class="stat-item reveal" style="transition-delay: 0.1s;">
                            <div class="stat-number">${stats.online_members || 0}</div>
                            <div class="stat-label">Aktywnych Online</div>
                        </div>
                        <div class="stat-item reveal" style="transition-delay: 0.2s;">
                            <div class="stat-number">${stats.total_messages || 0}</div>
                            <div class="stat-label">Wys≈Çanych Wiadomo≈õci</div>
                        </div>
                        <div class="stat-item reveal" style="transition-delay: 0.3s;">
                            <div class="stat-number">${stats.active_giveaways || 0}</div>
                            <div class="stat-label">Aktywnych Konkurs√≥w</div>
                        </div>
                    `;
                    document.querySelectorAll('#statsContainer .reveal').forEach(el => {
                        setTimeout(() => el.classList.add('visible'), 10);
                    });
                } else {
                    statsContainer.innerHTML = `<p class="text-center text-secondary col-span-full py-6">${stats.error || 'Nie uda≈Ço siƒô za≈Çadowaƒá statystyk.'}</p>`;
                }
            } catch (error) {
                console.error('B≈ÇƒÖd ≈Çadowania statystyk serwera:', error);
                statsErrorContainer.textContent = 'Nie uda≈Ço siƒô za≈Çadowaƒá statystyk serwera. Spr√≥buj od≈õwie≈ºyƒá stronƒô.';
                statsErrorContainer.classList.remove('hidden');
                statsContainer.innerHTML = `<p class="text-center text-red-400 col-span-full py-6">B≈ÇƒÖd ≈Çadowania statystyk.</p>`;
            }
        }


        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('currentYear').textContent = new Date().getFullYear();
            
            if (!document.documentElement.classList.contains('light') && !document.documentElement.classList.contains('dark')) {
                 document.documentElement.classList.add('dark');
            }

            setActiveNavLink();
            updateAuthDisplay();
            setupMobileMenu();
            setupRevealAnimations();
            setupDropdownDismiss();
            loadServerStats(); // Load server stats on index page
        });
    </script>
</body>
</html>
